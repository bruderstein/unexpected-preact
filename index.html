<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <link rel="stylesheet" href="static/normalize.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="static/main.css" type="text/css" media="screen" />
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="static/bug-icon-black.ico">
    <title>unexpected-preact</title>
</head>
<body class="sidebar-hidden theme-dark"> 
    <header>
        <div class="logo-icon"></div>
        <nav>
            <ul>
                <li class="menu-toggle-item">
                    <button class="menu-toggle" onclick="toggleSidebar()"></button>
                </li>
                
                <li class="active"><a href="">unexpected-preact</a></li>
                
                
                <li class=""><a href="assertions/PreactElement/to-render-as">Assertions</a></li>
                
                
                
            </ul>
        </nav>
        <div class="search" style="visibility: hidden">
            <input id="search" placeholder="Search..." value="">
            <div id="searchDropDown" class="dropDown">
                <ul id="searchResults"></ul>
            </div>
        </div>
    </header>

<div class="main" tabindex="-1">
    <div class="content">
        <h1 id="unexpected-preact">unexpected-preact</h1>
<p>Plugin for <a href="https://unexpected.js.org">unexpected</a> to allow for testing against the full virtual DOM for <a href="http://preact.js">preact.js</a></p>
<h1 id="features">Features</h1>
<ul>
<li>Assert Preact component&#39;s output using the full renderer and JSX &quot;expected&quot; values</li>
<li>Trigger events on components</li>
<li>Locate components using JSX queries</li>
<li>Use snapshot tests in Jest, with smart diffing when something fails</li>
</ul>
<h1 id="examples">Examples</h1>
<ul>
<li>Checking a simple render</li>
</ul>
<div class="code lang-javascript"><div>&nbsp;</div><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList&nbsp;items<span style="color: #F92672">=</span><span style="color: #999">{</span>items<span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;render&nbsp;as'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">'items'</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span><span style="color: #F92672">&gt;</span>Buy&nbsp;flowers&nbsp;<span style="color: #F92672">for</span>&nbsp;the&nbsp;wife<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span><span style="color: #F92672">&gt;</span>Mow&nbsp;the&nbsp;lawn<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">3</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span><span style="color: #F92672">&gt;</span>Buy&nbsp;groceries<span style="color: #F92672">&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoList<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><ul>
<li>Triggering an event on a button inside a subcomponent (using the <code>eventTarget</code> prop to identify where the event should be triggered)</li>
</ul>
<div class="code lang-javascript"><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList&nbsp;items<span style="color: #F92672">=</span><span style="color: #999">{</span>items<span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'when&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'with&nbsp;event&nbsp;click'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'on'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span>&nbsp;eventTarget&nbsp;<span style="color: #F92672">/&gt;&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;contain'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">'completed'</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>span<span style="color: #F92672">&gt;</span>Completed<span style="color: #F92672">!&lt;/</span>span<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>div<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><ul>
<li>Locating a component with <code>queried for</code> then validating the render</li>
</ul>
<div class="code lang-javascript"><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList&nbsp;items<span style="color: #F92672">=</span><span style="color: #999">{</span>items<span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'when&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'queried&nbsp;for'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;have&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">2</span><span style="color: #999">}</span><span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>div&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">'completed'</span><span style="color: #F92672">/&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span></div><div><span style="color: #999">);</span></div></div><ul>
<li>Locating a component and then checking the state of the component with the full renderer</li>
</ul>
<div class="code lang-javascript"><div>expect<span style="color: #999">(</span></div><div>&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>TodoList&nbsp;items<span style="color: #F92672">=</span><span style="color: #999">{</span>items<span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'when&nbsp;rendered'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'with&nbsp;event&nbsp;click'</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'on'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span><span style="color: #F92672">&gt;&lt;</span>span&nbsp;className<span style="color: #F92672">=</span><span style="color: #E6DB74">&quot;label&quot;</span>&nbsp;eventTarget&nbsp;<span style="color: #F92672">/&gt;&lt;/</span>TodoItem<span style="color: #F92672">&gt;</span><span style="color: #999">,</span></div><div>&nbsp;&nbsp;<span style="color: #E6DB74">'queried&nbsp;for'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">&lt;</span>TodoItem&nbsp;id<span style="color: #F92672">=</span><span style="color: #999">{</span><span style="color: #66D9EF; font-weight: bold">1</span><span style="color: #999">}</span>&nbsp;<span style="color: #F92672">/&gt;</span></div><div><span style="color: #999">).</span>then<span style="color: #999">(</span>todoItem&nbsp;<span style="color: #F92672">=&gt;</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;<span style="color: #888">//&nbsp;Here&nbsp;we're&nbsp;checking&nbsp;the&nbsp;state,&nbsp;but&nbsp;we&nbsp;could&nbsp;perform</span></div><div>&nbsp;&nbsp;<span style="color: #888">//&nbsp;any&nbsp;operation&nbsp;on&nbsp;the&nbsp;instance&nbsp;of&nbsp;the&nbsp;component.</span></div><div>&nbsp;&nbsp;expect<span style="color: #999">(</span>todoItem<span style="color: #999">.</span>state<span style="color: #999">,</span>&nbsp;<span style="color: #E6DB74">'to&nbsp;satisfy'</span><span style="color: #999">,</span>&nbsp;<span style="color: #999">{</span>&nbsp;completed<span style="color: #999">:</span>&nbsp;<span style="color: #66D9EF; font-weight: bold">true</span>&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><h1 id="usage">Usage</h1>
<div class="code lang-"><div>npm&nbsp;install&nbsp;--save-dev&nbsp;unexpected&nbsp;unexpected-preact</div></div><h2 id="initialising">Initialising</h2>
<h3 id="when-using-jest">When using jest</h3>
<p><code>require</code> / <code>import</code> <code>&#39;unexpected-preact/jest&#39;</code> in order to use jest&#39;s snapshot testing</p>
<div class="code lang-javascript"><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;unexpected&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected'</span><span style="color: #999">);</span></div><div><span style="color: #F92672">var</span>&nbsp;unexpectedPreact&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected-preact/jest'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;MyComponent&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span>'<span style="color: #999">..</span><span style="color: #F92672">/</span>MyComponent<span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">const</span>&nbsp;expect&nbsp;<span style="color: #F92672">=</span>&nbsp;unexpected<span style="color: #999">.</span>clone<span style="color: #999">()</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">.</span>use<span style="color: #999">(</span>unexpectedPreact<span style="color: #999">);</span></div><div>&nbsp;</div><div>describe<span style="color: #999">(</span><span style="color: #E6DB74">'MyComponent'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;it<span style="color: #999">(</span><span style="color: #E6DB74">'renders&nbsp;a&nbsp;button'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #888">//&nbsp;All&nbsp;custom&nbsp;components&nbsp;and&nbsp;DOM&nbsp;elements&nbsp;are&nbsp;included&nbsp;in&nbsp;the&nbsp;tree,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #888">//&nbsp;so&nbsp;you&nbsp;can&nbsp;assert&nbsp;to&nbsp;whatever&nbsp;level&nbsp;you&nbsp;wish</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyComponent&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;render&nbsp;as'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>MyComponent<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span>Click&nbsp;me<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>MyComponent<span style="color: #F92672">&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><h3 id="when-using-mocha">When using mocha</h3>
<p>Note: Unlike unexpected-react, the order of requires does not matter</p>
<div class="code lang-javascript"><div>require<span style="color: #999">(</span>&nbsp;<span style="color: #E6DB74">'../testHelpers/emulateDom'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;unexpected&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected'</span><span style="color: #999">);</span></div><div><span style="color: #F92672">var</span>&nbsp;unexpectedPreact&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'unexpected-preact'</span><span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">var</span>&nbsp;MyComponent&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span>'<span style="color: #999">..</span><span style="color: #F92672">/</span>MyComponent<span style="color: #999">);</span></div><div>&nbsp;</div><div><span style="color: #F92672">const</span>&nbsp;expect&nbsp;<span style="color: #F92672">=</span>&nbsp;unexpected<span style="color: #999">.</span>clone<span style="color: #999">()</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">.</span>use<span style="color: #999">(</span>unexpectedPreact<span style="color: #999">);</span></div><div>&nbsp;</div><div>describe<span style="color: #999">(</span><span style="color: #E6DB74">'MyComponent'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;it<span style="color: #999">(</span><span style="color: #E6DB74">'renders&nbsp;a&nbsp;button'</span><span style="color: #999">,</span>&nbsp;<span style="color: #F92672">function</span>&nbsp;<span style="color: #999">()</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #888">//&nbsp;All&nbsp;custom&nbsp;components&nbsp;and&nbsp;DOM&nbsp;elements&nbsp;are&nbsp;included&nbsp;in&nbsp;the&nbsp;tree,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #888">//&nbsp;so&nbsp;you&nbsp;can&nbsp;assert&nbsp;to&nbsp;whatever&nbsp;level&nbsp;you&nbsp;wish</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #999">(</span><span style="color: #F92672">&lt;</span>MyComponent&nbsp;<span style="color: #F92672">/&gt;</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #E6DB74">'to&nbsp;render&nbsp;as'</span><span style="color: #999">,</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>MyComponent<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;</span>button<span style="color: #F92672">&gt;</span>Click&nbsp;me<span style="color: #F92672">&lt;/</span>button<span style="color: #F92672">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">&lt;/</span>MyComponent<span style="color: #F92672">&gt;</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">});</span></div><div><span style="color: #999">});</span></div></div><h2 id="emulating-the-dom">Emulating the DOM</h2>
<h3 id="when-using-jest">When using jest</h3>
<p>For jest, this just works as jsdom is automatically configured.</p>
<h3 id="when-using-mocha">When using mocha</h3>
<p>The <code>emulateDom</code> file depends on whether you want to use <a href="https://npmjs.com/package/domino"><code>domino</code></a>, or <a href="https://npmjs.com/package/jsdom"><code>jsdom</code></a></p>
<p>For <code>jsdom</code>:</p>
<div class="code lang-javascript"><div><span style="color: #888">//&nbsp;emulateDom.js&nbsp;-&nbsp;jsdom&nbsp;variant</span></div><div>&nbsp;</div><div><span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">typeof</span>&nbsp;document&nbsp;<span style="color: #F92672">===</span>&nbsp;<span style="color: #E6DB74">'undefined'</span><span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">const</span>&nbsp;jsdom&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'jsdom'</span><span style="color: #999">).</span>jsdom<span style="color: #999">;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>document&nbsp;<span style="color: #F92672">=</span>&nbsp;jsdom<span style="color: #999">(</span><span style="color: #E6DB74">''</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>window&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>document<span style="color: #999">.</span>defaultView<span style="color: #999">;</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">for</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">let</span>&nbsp;key&nbsp;<span style="color: #F92672">in</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">!</span>global<span style="color: #999">[</span>key<span style="color: #999">])</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">[</span>key<span style="color: #999">]</span>&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">[</span>key<span style="color: #999">];</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>Node&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">.</span>Node<span style="color: #999">;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>Text&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">.</span>Text<span style="color: #999">;</span></div><div><span style="color: #999">}</span></div></div><p>For <code>domino</code>:</p>
<div class="code lang-javascript"><div><span style="color: #888">//&nbsp;emulateDom.js&nbsp;-&nbsp;domino&nbsp;variant</span></div><div>&nbsp;</div><div><span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">typeof</span>&nbsp;document&nbsp;<span style="color: #F92672">===</span>&nbsp;<span style="color: #E6DB74">'undefined'</span><span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">const</span>&nbsp;domino&nbsp;<span style="color: #F92672">=</span>&nbsp;require<span style="color: #999">(</span><span style="color: #E6DB74">'domino'</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>window&nbsp;<span style="color: #F92672">=</span>&nbsp;domino<span style="color: #999">.</span>createWindow<span style="color: #999">(</span><span style="color: #E6DB74">''</span><span style="color: #999">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>document&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">.</span>document<span style="color: #999">;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">.</span>navigator&nbsp;<span style="color: #F92672">=</span>&nbsp;<span style="color: #999">{</span>&nbsp;userAgent<span style="color: #999">:</span>&nbsp;<span style="color: #E6DB74">'domino'</span>&nbsp;<span style="color: #999">};</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">for</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">let</span>&nbsp;key&nbsp;<span style="color: #F92672">in</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">)</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #F92672">if</span>&nbsp;<span style="color: #999">(</span><span style="color: #F92672">!</span>global<span style="color: #999">[</span>key<span style="color: #999">])</span>&nbsp;<span style="color: #999">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global<span style="color: #999">[</span>key<span style="color: #999">]</span>&nbsp;<span style="color: #F92672">=</span>&nbsp;global<span style="color: #999">.</span>window<span style="color: #999">[</span>key<span style="color: #999">];</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #999">}</span></div><div><span style="color: #999">}</span></div></div><h1 id="preact-compatibility">Preact Compatibility</h1>
<p>unexpected-preact is tested with preact version 7 and 8, but has also been tested to work with version 6.</p>
<h1 id="contributing">Contributing</h1>
<p>We welcome pull requests, bug reports, and extra test cases. If you find something that doesn&#39;t work
as you believe it should, or where the output isn&#39;t as good as it could be, raise an issue!</p>
<h2 id="thanks">Thanks</h2>
<p><a href="http://unexpected.js.org">Unexpected</a> is a great library to work with, and I offer my sincere thanks to <a href="https://github.com/sunesimonsen">@sunesimonsen</a>
and <a href="https://github.com/papandreou">@papandreou</a>, who have created an assertion library that makes testing JavaScript a joy.</p>
<p>Thanks to <a href="https://twitter.com/oskarhane">@oskarhane</a> for initially asking about this and helping with some early feedback.</p>
<h2 id="license">License</h2>
<p>MIT</p>

    </div>
    <a class="github-ribbon" href="https://github.com/bruderstein/unexpected-preact"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
</div>
<script type="text/javascript">
    baseUrl = '.';
</script>
<script type="text/javascript" src="static/toggleSidebar.js"></script>
<script type="text/javascript" src="static/rememberScrollPosition.js"></script>
<script type="text/javascript" src="static/focusMain.js"></script>
<script type="text/javascript" src="static/search.js"></script>
</body>
</html>

